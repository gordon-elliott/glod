charity:
  name:
  admin:
    email:

tax:
  chy3:
    minimum_donation: 250.0
    consider_last_n_years: 3

db:
  server:
  port: 5432
  admin_user:
  admin_password:
  operational_db_name:
  restricted_user:
  restricted_password:
  protocol: postgresql+psycopg2
  admin_connection: "{protocol}://{admin_user}:{admin_password}@{server}:{port}/postgres"
  restricted_connection: "{protocol}://{restricted_user}:{restricted_password}@{server}:{port}/{operational_db_name}"

logging:
  version: 1
  formatters:
    simple:
      format: '%(asctime)s - %(levelname)s - %(name)s - %(message)s'
  handlers:
    console:
      class: logging.StreamHandler
      level: DEBUG
      formatter: simple
      stream: ext://sys.stdout
  loggers:
    default:
      level: DEBUG
      handlers: [console]
      propagate: no
    sqlalchemy.engine:
      level: INFO
      handlers: [console]
      propagate: no
    a_tuin:
      level: INFO
      handlers: [console]
      propagate: no
    sanic:
      level: INFO
      handlers: [console]
      propagate: no
    graphql.execution.executor:
      level: DEBUG
      handlers: [console]
      propagate: no
  root:
    level: INFO
    handlers: [console]

folders:
  root_package: glod
  config: config
  resources: resources

gdrive:
  credentials_file:
  ledger_sheet_id:
  tax_rebates_sheet_id:
  statement_items_sheet_name: "bank statements"
  parish_list_sheet_id:
  account_statements_folder: account.statements
  chy3_template_doc_id:

ledger_sheet:
  freeze:
    rows: 1
  column_formats:
    -
      range_name: A
      cell_format:
        numberFormat:
          type: TEXT
    -
      range_name: B
      cell_format:
        numberFormat:
          type: DATE
          pattern: dd/mm/yyy
        horizontalAlignment: RIGHT
    -
      range_name: C:D
      cell_format:
        numberFormat:
          type: TEXT
    -
      range_name: E:G
      cell_format:
        numberFormat:
          type: NUMBER
          pattern: "#,##0.00"
        horizontalAlignment: RIGHT
  formula_templates:
    -
    -
    - =if(ISBLANK(H{row_no}), C{row_no}, H{row_no})
    - =if(ISTEXT(J{row_no}), if(EQ("LODGMENT", LEFT(J{row_no}, 8)), value(mid(J{row_no}, 9, 12)), if(iserror(FIND(LEFT(J{row_no}, 2), "D0|D1|E0|E1")), "", LEFT(J{row_no}, 6))), J{row_no})
    - =if(K{row_no}="", "", CONCATENATE(A{row_no}, "|", K{row_no}))
    - =E{row_no}*-1+F{row_no}
    - =if(eq(I{row_no}, "opening"), G{row_no}, round(N{prev_row}+M{row_no}, 6))
    - =if(or(ISBLANK(G{row_no}), eq("N/A", G{row_no})), "", EQ(G{row_no}, N{row_no}))
    - =year(datevalue((B{row_no})))
    - =month(datevalue(B{row_no}))
    - =day(datevalue(B{row_no}))
    -
    -
    -
    -
    - =if(or(ISBLANK(L{row_no}), L{row_no}=""), "", vlookup(L{row_no}, transactions_by_reference, 6, FALSE))
    - =if(or(ISBLANK(L{row_no}), L{row_no}=""), "", vlookup(L{row_no}, transactions_by_reference, 8, FALSE))
    - =if(X{row_no}="", "", eq(X{row_no}, V{row_no}))
    - =if(or(ISBLANK(L{row_no}), L{row_no}=""), "", vlookup(L{row_no}, transactions_by_reference, 16, FALSE))
    - =if(Z{row_no}="", "", if(Z{row_no}<0, eq(Z{row_no}, -1*E{row_no}), eq(Z{row_no}, F{row_no})))
    - =if(or(ISBLANK(L{row_no}), L{row_no}=""), "", vlookup(L{row_no}, transactions_by_reference, 2, FALSE))
    - =if(AB{row_no}="", "", eq(AB{row_no}, P{row_no}))

crudl:
  admin:
    use_modified_since: False
#    crudl_js: http://cdn.crudl.io/static/releases/0.2.0/crudl.min.js
    crudl_js: http://cdn.crudl.io/static/releases/0.3.0/crudl.js
#    crudl_js: /static/crudl/crudl.js
    crudl_css: http://cdn.crudl.io/static/releases/0.3.0/crudl-ui/css/crudl-ui.css
